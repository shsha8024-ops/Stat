<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ø§Ù„ØºØ¯ÙŠØ± Ù†Ù‚Ù„ Ùˆ ØªØ®Ù„ÙŠØµ | ÙÙˆØ§ØªÙŠØ±</title>

<!-- jsPDF -->
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

<style>
:root{
  --primary:#1e40af;
  --bg:#f8fafc;
  --card:#ffffff;
  --border:#e5e7eb;
}

body{
  margin:0;
  font-family:"Segoe UI",Tahoma,Arial;
  background:var(--bg);
}

header{
  background:linear-gradient(90deg,#1e3a8a,#1e40af);
  color:#fff;
  padding:16px 24px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.logo{
  width:46px;height:46px;
  background:#fff;
  color:var(--primary);
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  font-weight:bold;
}

main{
  display:grid;
  grid-template-columns:320px 1fr;
  gap:20px;
  padding:20px;
}

.card{
  background:var(--card);
  border-radius:14px;
  padding:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.06);
}

.btn{
  padding:8px 12px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  font-size:14px;
}

.primary{background:var(--primary);color:#fff;}
.ghost{background:#eef2ff;}
.danger{background:#dc2626;color:#fff;}

.pill{
  background:#eef2ff;
  padding:4px 10px;
  border-radius:999px;
  font-size:12px;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}

th,td{
  border:1px solid var(--border);
  padding:8px;
  text-align:center;
}

th{background:#f1f5f9;}

td[contenteditable]{background:#fefce8;}

.activeCell{
  outline:2px solid var(--primary);
  background:#eef2ff;
}

.tabs button{margin-left:6px;}
.tab{display:none;}
.tab.active{display:block;}
</style>
</head>

<body>

<header>
  <div style="display:flex;gap:12px;align-items:center">
    <div class="logo">Øº</div>
    <div>
      <strong>ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¹Ù…ÙŠÙ„</strong><br>
      <small id="clientLine">â€”</small>
    </div>
  </div>
  <span class="pill">Ø§Ù„Ø¹Ù…Ù„Ø©: <b id="curPill">$</b></span>
</header>

<main>

<!-- Sidebar -->
<aside class="card">
  <h3>Ø§Ù„ÙÙˆØ§ØªÙŠØ± <span class="pill" id="invCount">0</span></h3>

  <button class="btn primary" id="btnNewInv">+ ÙØ§ØªÙˆØ±Ø©</button>
  <button class="btn ghost" id="btnRenameInv">ØªØºÙŠÙŠØ± Ø§Ø³Ù…</button>
  <button class="btn danger" id="btnDeleteInv">Ø­Ø°Ù</button>

  <hr>
  <select id="invSelect" style="width:100%;padding:6px"></select>
</aside>

<!-- Content -->
<section class="card">

  <div style="display:flex;justify-content:space-between;align-items:center">
    <span class="pill" id="invPill">ÙØ§ØªÙˆØ±Ø©: â€”</span>
    <input type="date" id="invDate">
  </div>

  <div class="tabs" style="margin-top:12px">
    <button class="btn ghost tabBtn active" data-tab="ops">Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</button>
    <button class="btn ghost tabBtn" data-tab="pay">Ø§Ù„Ù‚Ø¨ÙˆØ¶Ø§Øª</button>
    <button class="btn ghost tabBtn" data-tab="final">Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</button>
    <button class="btn primary" onclick="exportPDF()">ğŸ“„ PDF Ø±Ø³Ù…ÙŠ</button>
  </div>

  <!-- OPS -->
  <div id="ops" class="tab active">
    <button class="btn primary" id="t1AddRow">+ Ø³Ø·Ø±</button>
    <button class="btn danger" id="t1DelRow">Ø­Ø°Ù</button>
    <button class="btn ghost" id="t1AddCol">+ Ø¹Ù…ÙˆØ¯</button>
    <button class="btn ghost" id="t1AddColAfter">+ Ø¨Ø¹Ø¯Ù‡</button>
    <button class="btn danger" id="t1DelCol">Ø­Ø°Ù Ø¹Ù…ÙˆØ¯</button>

    <table id="t1" data-min-cols="3">
      <thead>
        <tr><th>Ø±Ù‚Ù…</th><th>Ø§Ù„Ø¨ÙŠØ§Ù†</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th></tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td contenteditable>Ø®Ø¯Ù…Ø©</td>
          <td class="amount" contenteditable>0$</td>
        </tr>
      </tbody>
      <tfoot>
        <tr><td colspan="2">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</td><td id="sum1">0$</td></tr>
      </tfoot>
    </table>
  </div>

  <!-- PAY -->
  <div id="pay" class="tab">
    <button class="btn primary" id="t2AddRow">+ Ø³Ø·Ø±</button>
    <button class="btn danger" id="t2DelRow">Ø­Ø°Ù</button>
    <button class="btn ghost" id="t2AddCol">+ Ø¹Ù…ÙˆØ¯</button>
    <button class="btn ghost" id="t2AddColAfter">+ Ø¨Ø¹Ø¯Ù‡</button>
    <button class="btn danger" id="t2DelCol">Ø­Ø°Ù Ø¹Ù…ÙˆØ¯</button>

    <table id="t2" data-min-cols="4">
      <thead>
        <tr><th>Ø±Ù‚Ù…</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ø¨ÙŠØ§Ù†</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th></tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td contenteditable></td>
          <td contenteditable>Ù‚Ø¨Ø¶</td>
          <td class="amount" contenteditable>0$</td>
        </tr>
      </tbody>
      <tfoot>
        <tr><td colspan="3">Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù‚Ø¨ÙˆØ¶Ø§Øª</td><td id="sum2">0$</td></tr>
      </tfoot>
    </table>
  </div>

  <!-- FINAL -->
  <div id="final" class="tab">
    <table>
      <tr><th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</th><td id="f1">0$</td></tr>
      <tr><th>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù‚Ø¨ÙˆØ¶Ø§Øª</th><td id="f2">0$</td></tr>
      <tr><th>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</th><td id="f3">0$</td></tr>
    </table>
  </div>

  <p style="margin-top:10px;font-size:12px;color:#6b7280">
    ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØµÙØ­
  </p>

</section>
</main>

<script>
function exportPDF(){
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF("p","mm","a4");

  pdf.setFontSize(16);
  pdf.text("ÙˆØµÙ„ Ù‚Ø¨Ø¶ / ÙƒØ´Ù Ø­Ø³Ø§Ø¨",105,20,{align:"center"});

  pdf.setFontSize(11);
  pdf.text(document.getElementById("invPill").textContent,20,35);
  pdf.text("Ø§Ù„ØªØ§Ø±ÙŠØ®: "+document.getElementById("invDate").value,150,35);

  let y=50;
  pdf.text("Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª: "+document.getElementById("f1").textContent,20,y);
  y+=8;
  pdf.text("Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù‚Ø¨ÙˆØ¶Ø§Øª: "+document.getElementById("f2").textContent,20,y);
  y+=8;
  pdf.text("Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: "+document.getElementById("f3").textContent,20,y);

  y+=25;
  pdf.line(20,y,80,y);
  pdf.text("ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ„Ù…",30,y+6);

  pdf.line(120,y,180,y);
  pdf.text("ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨",130,y+6);

  pdf.save("invoice.pdf");
}
</script>

<script type="module" src="assets/js/invoice-page.js"></script>
</body>
</html>